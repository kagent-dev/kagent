{
  "agentCard": {
    "capabilities": {
      "pushNotifications": false,
      "stateTransitionHistory": true,
      "streaming": true
    },
    "defaultInputModes": [
      "text"
    ],
    "defaultOutputModes": [
      "text"
    ],
    "description": "",
    "name": "git_skills_agent",
    "skills": null,
    "url": "http://git-skills-agent.test:8080",
    "version": ""
  },
  "config": {
    "description": "",
    "execute_code": false,
    "instruction": "You are a helpful assistant with skills from git.",
    "model": {
      "base_url": "",
      "headers": {
        "User-Agent": "kagent/1.0"
      },
      "max_tokens": 1024,
      "model": "gpt-4o",
      "reasoning_effort": "low",
      "temperature": 0.7,
      "top_p": 0.95,
      "type": "openai"
    },
    "stream": false
  },
  "manifest": [
    {
      "apiVersion": "v1",
      "kind": "Secret",
      "metadata": {
        "labels": {
          "app": "kagent",
          "app.kubernetes.io/managed-by": "kagent",
          "app.kubernetes.io/name": "git-skills-agent",
          "app.kubernetes.io/part-of": "kagent",
          "kagent": "git-skills-agent"
        },
        "name": "git-skills-agent",
        "namespace": "test",
        "ownerReferences": [
          {
            "apiVersion": "kagent.dev/v1alpha2",
            "blockOwnerDeletion": true,
            "controller": true,
            "kind": "Agent",
            "name": "git-skills-agent",
            "uid": ""
          }
        ]
      },
      "stringData": {
        "agent-card.json": "{\"name\":\"git_skills_agent\",\"description\":\"\",\"url\":\"http://git-skills-agent.test:8080\",\"version\":\"\",\"capabilities\":{\"streaming\":true,\"pushNotifications\":false,\"stateTransitionHistory\":true},\"defaultInputModes\":[\"text\"],\"defaultOutputModes\":[\"text\"],\"skills\":[]}",
        "config.json": "{\"model\":{\"type\":\"openai\",\"model\":\"gpt-4o\",\"headers\":{\"User-Agent\":\"kagent/1.0\"},\"base_url\":\"\",\"max_tokens\":1024,\"reasoning_effort\":\"low\",\"temperature\":0.7,\"top_p\":0.95},\"description\":\"\",\"instruction\":\"You are a helpful assistant with skills from git.\",\"execute_code\":false,\"stream\":false}"
      }
    },
    {
      "apiVersion": "v1",
      "kind": "ServiceAccount",
      "metadata": {
        "labels": {
          "app": "kagent",
          "app.kubernetes.io/managed-by": "kagent",
          "app.kubernetes.io/name": "git-skills-agent",
          "app.kubernetes.io/part-of": "kagent",
          "kagent": "git-skills-agent"
        },
        "name": "git-skills-agent",
        "namespace": "test",
        "ownerReferences": [
          {
            "apiVersion": "kagent.dev/v1alpha2",
            "blockOwnerDeletion": true,
            "controller": true,
            "kind": "Agent",
            "name": "git-skills-agent",
            "uid": ""
          }
        ]
      }
    },
    {
      "apiVersion": "apps/v1",
      "kind": "Deployment",
      "metadata": {
        "labels": {
          "app": "kagent",
          "app.kubernetes.io/managed-by": "kagent",
          "app.kubernetes.io/name": "git-skills-agent",
          "app.kubernetes.io/part-of": "kagent",
          "kagent": "git-skills-agent"
        },
        "name": "git-skills-agent",
        "namespace": "test",
        "ownerReferences": [
          {
            "apiVersion": "kagent.dev/v1alpha2",
            "blockOwnerDeletion": true,
            "controller": true,
            "kind": "Agent",
            "name": "git-skills-agent",
            "uid": ""
          }
        ]
      },
      "spec": {
        "selector": {
          "matchLabels": {
            "app": "kagent",
            "kagent": "git-skills-agent"
          }
        },
        "strategy": {
          "rollingUpdate": {
            "maxSurge": 1,
            "maxUnavailable": 0
          },
          "type": "RollingUpdate"
        },
        "template": {
          "metadata": {
            "annotations": {
              "kagent.dev/config-hash": "7441969670802813174"
            },
            "labels": {
              "app": "kagent",
              "app.kubernetes.io/managed-by": "kagent",
              "app.kubernetes.io/name": "git-skills-agent",
              "app.kubernetes.io/part-of": "kagent",
              "kagent": "git-skills-agent"
            }
          },
          "spec": {
            "containers": [
              {
                "args": [
                  "--host",
                  "0.0.0.0",
                  "--port",
                  "8080",
                  "--filepath",
                  "/config"
                ],
                "env": [
                  {
                    "name": "OPENAI_API_KEY",
                    "valueFrom": {
                      "secretKeyRef": {
                        "key": "api-key",
                        "name": "openai-secret"
                      }
                    }
                  },
                  {
                    "name": "KAGENT_NAMESPACE",
                    "valueFrom": {
                      "fieldRef": {
                        "fieldPath": "metadata.namespace"
                      }
                    }
                  },
                  {
                    "name": "KAGENT_NAME",
                    "value": "git-skills-agent"
                  },
                  {
                    "name": "KAGENT_URL",
                    "value": "http://kagent-controller.kagent:8083"
                  },
                  {
                    "name": "KAGENT_SKILLS_FOLDER",
                    "value": "/skills"
                  }
                ],
                "image": "cr.kagent.dev/kagent-dev/kagent/app:dev",
                "imagePullPolicy": "IfNotPresent",
                "name": "kagent",
                "ports": [
                  {
                    "containerPort": 8080,
                    "name": "http"
                  }
                ],
                "readinessProbe": {
                  "httpGet": {
                    "path": "/.well-known/agent-card.json",
                    "port": "http"
                  },
                  "initialDelaySeconds": 15,
                  "periodSeconds": 15,
                  "timeoutSeconds": 15
                },
                "resources": {
                  "limits": {
                    "cpu": "2",
                    "memory": "1Gi"
                  },
                  "requests": {
                    "cpu": "100m",
                    "memory": "384Mi"
                  }
                },
                "securityContext": {
                  "privileged": true
                },
                "volumeMounts": [
                  {
                    "mountPath": "/config",
                    "name": "config"
                  },
                  {
                    "mountPath": "/skills",
                    "name": "kagent-skills",
                    "readOnly": true
                  },
                  {
                    "mountPath": "/var/run/secrets/tokens",
                    "name": "kagent-token"
                  }
                ]
              }
            ],
            "initContainers": [
              {
                "command": [
                  "/bin/sh",
                  "-c",
                  "set -e\n_auth_mount=\"$(cat \u003c\u003c'ENDVAL'\n/git-auth\nENDVAL\n)\"\nif [ -f \"${_auth_mount}/ssh-privatekey\" ]; then\n  mkdir -p ~/.ssh\n  cp \"${_auth_mount}/ssh-privatekey\" ~/.ssh/id_rsa\n  chmod 600 ~/.ssh/id_rsa\n  ssh-keyscan github.com gitlab.com bitbucket.org \u003e\u003e ~/.ssh/known_hosts\nelif [ -f \"${_auth_mount}/token\" ]; then\n  git config --global credential.helper \"!f() { echo username=x-access-token; echo password=\\$(cat ${_auth_mount}/token); }; f\"\nfi\n_url=\"$(cat \u003c\u003c'ENDVAL'\nhttps://github.com/org/my-skills\nENDVAL\n)\"\n_ref=\"$(cat \u003c\u003c'ENDVAL'\nv2.0.0\nENDVAL\n)\"\n_dest=\"$(cat \u003c\u003c'ENDVAL'\n/skills/k8s-skill\nENDVAL\n)\"\necho \"Cloning ${_url} (ref ${_ref}) into ${_dest}\"\ngit clone --depth 1 --branch \"$_ref\" -- \"$_url\" \"$_dest\"\n_subpath=\"$(cat \u003c\u003c'ENDVAL'\nskills/k8s\nENDVAL\n)\"\n_tmp=\"$(mktemp -d)\"\ncp -a \"${_dest}/${_subpath}/.\" \"$_tmp/\"\nrm -rf \"$_dest\"\nmv \"$_tmp\" \"$_dest\"\n_url=\"$(cat \u003c\u003c'ENDVAL'\nhttps://github.com/org/another-skill\nENDVAL\n)\"\n_ref=\"$(cat \u003c\u003c'ENDVAL'\nabc123def456abc123def456abc123def456abc1\nENDVAL\n)\"\n_dest=\"$(cat \u003c\u003c'ENDVAL'\n/skills/another-skill\nENDVAL\n)\"\necho \"Cloning ${_url} (commit ${_ref}) into ${_dest}\"\ngit clone -- \"$_url\" \"$_dest\"\ncd \"$_dest\" \u0026\u0026 git checkout \"$_ref\"\n_url=\"$(cat \u003c\u003c'ENDVAL'\nhttps://github.com/org/private-skill\nENDVAL\n)\"\n_ref=\"$(cat \u003c\u003c'ENDVAL'\nmain\nENDVAL\n)\"\n_dest=\"$(cat \u003c\u003c'ENDVAL'\n/skills/private-skill\nENDVAL\n)\"\necho \"Cloning ${_url} (ref ${_ref}) into ${_dest}\"\ngit clone --depth 1 --branch \"$_ref\" -- \"$_url\" \"$_dest\"\n_image=\"$(cat \u003c\u003c'ENDVAL'\nghcr.io/org/oci-skill:v1.0\nENDVAL\n)\"\n_dest=\"$(cat \u003c\u003c'ENDVAL'\n/skills/oci-skill\nENDVAL\n)\"\necho \"Exporting OCI image ${_image} into ${_dest}\"\nkrane export \"$_image\" '/tmp/oci-skill.tar'\nmkdir -p \"$_dest\"\ntar xf '/tmp/oci-skill.tar' -C \"$_dest\"\nrm -f '/tmp/oci-skill.tar'\n"
                ],
                "image": "cr.kagent.dev/kagent-dev/kagent/skills-init:dev",
                "name": "skills-init",
                "resources": {},
                "volumeMounts": [
                  {
                    "mountPath": "/skills",
                    "name": "kagent-skills"
                  },
                  {
                    "mountPath": "/git-auth",
                    "name": "git-auth",
                    "readOnly": true
                  }
                ]
              }
            ],
            "serviceAccountName": "git-skills-agent",
            "volumes": [
              {
                "name": "config",
                "secret": {
                  "secretName": "git-skills-agent"
                }
              },
              {
                "emptyDir": {},
                "name": "kagent-skills"
              },
              {
                "name": "git-auth",
                "secret": {
                  "secretName": "github-token"
                }
              },
              {
                "name": "kagent-token",
                "projected": {
                  "sources": [
                    {
                      "serviceAccountToken": {
                        "audience": "kagent",
                        "expirationSeconds": 3600,
                        "path": "kagent-token"
                      }
                    }
                  ]
                }
              }
            ]
          }
        }
      },
      "status": {}
    },
    {
      "apiVersion": "v1",
      "kind": "Service",
      "metadata": {
        "labels": {
          "app": "kagent",
          "app.kubernetes.io/managed-by": "kagent",
          "app.kubernetes.io/name": "git-skills-agent",
          "app.kubernetes.io/part-of": "kagent",
          "kagent": "git-skills-agent"
        },
        "name": "git-skills-agent",
        "namespace": "test",
        "ownerReferences": [
          {
            "apiVersion": "kagent.dev/v1alpha2",
            "blockOwnerDeletion": true,
            "controller": true,
            "kind": "Agent",
            "name": "git-skills-agent",
            "uid": ""
          }
        ]
      },
      "spec": {
        "ports": [
          {
            "name": "http",
            "port": 8080,
            "targetPort": 8080
          }
        ],
        "selector": {
          "app": "kagent",
          "kagent": "git-skills-agent"
        },
        "type": "ClusterIP"
      },
      "status": {
        "loadBalancer": {}
      }
    }
  ]
}